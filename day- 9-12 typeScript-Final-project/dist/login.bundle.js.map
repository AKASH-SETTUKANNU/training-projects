{"version":3,"file":"login.bundle.js","mappings":";;;;;AAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC","sources":["webpack://my-project/./login/login.ts"],"sourcesContent":["\"use strict\";\r\n// Elements\r\nconst email = document.getElementById(\"user-mail\");\r\nconst password = document.getElementById(\"user-password\");\r\nconst mailError = document.getElementById(\"email-error\");\r\nconst passwordError = document.getElementById(\"password-error\");\r\n// Handle email error\r\nfunction emailErrorHandel() {\r\n    const emailValue = email.value.trim();\r\n    if (emailValue === '') {\r\n        mailError.textContent = \"Please enter your Email...\";\r\n        return false;\r\n    }\r\n    else if (!emailExistornot(emailValue)) {\r\n        mailError.textContent = \"User does not exist, please sign up...\";\r\n        return false;\r\n    }\r\n    else {\r\n        mailError.textContent = \"\";\r\n        return true;\r\n    }\r\n}\r\n// Function to check if the email exists\r\nfunction emailExistornot(emailValue) {\r\n    const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n    // Log users and the email being checked\r\n    console.log('Users:', users);\r\n    console.log('Checking email:', emailValue);\r\n    return users.some(user => user.userEmail.trim() === emailValue);\r\n}\r\n// Check if password in local storage matches or not\r\nfunction passWordMatch() {\r\n    const emailValue = email.value.trim();\r\n    const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n    const user = users.find(user => user.userEmail.trim() === emailValue);\r\n    // Log user and password\r\n    console.log('Found user:', user);\r\n    return user ? user.userPassword === password.value : false;\r\n}\r\n// Handle password error\r\nfunction passwordErrorHandel() {\r\n    if (password.value.trim() === '') {\r\n        passwordError.textContent = \"Please enter your password...\";\r\n        return false;\r\n    }\r\n    else if (!passWordMatch()) {\r\n        passwordError.textContent = \"Password does not match...\";\r\n        return false;\r\n    }\r\n    else {\r\n        passwordError.textContent = \"\";\r\n        return true;\r\n    }\r\n}\r\n// Login user if login button is triggered\r\nfunction loginUser(event) {\r\n    event.preventDefault();\r\n    if (emailErrorHandel() && passwordErrorHandel()) {\r\n        const emailValue = email.value.trim();\r\n        const users = JSON.parse(localStorage.getItem(\"users\") || \"[]\");\r\n        const user = users.find(user => user.userEmail.trim() === emailValue);\r\n        if (user) {\r\n            const name = user.userName;\r\n            localStorage.setItem(\"loggedInUserEmail\", emailValue);\r\n            if (user.userRole === 'admin') {\r\n                window.location.href = \"../adminIndex/adminIndex.html\";\r\n            }\r\n            else {\r\n                alert(`Welcome, ${name}!`);\r\n                window.location.href = \"../index/index.html\";\r\n            }\r\n        }\r\n        else {\r\n            alert(\"Invalid email or password.\");\r\n        }\r\n    }\r\n}\r\n// Add event listeners when the window loads\r\nwindow.addEventListener('load', () => {\r\n    // Attach event listeners\r\n    const emailInput = document.getElementById('user-mail');\r\n    const passwordInput = document.getElementById('user-password');\r\n    const loginButton = document.querySelector('.login-btn button');\r\n    if (emailInput && passwordInput && loginButton) {\r\n        emailInput.addEventListener('blur', emailErrorHandel);\r\n        passwordInput.addEventListener('blur', passwordErrorHandel);\r\n        loginButton.addEventListener('click', loginUser);\r\n    }\r\n});\r\n"],"names":[],"sourceRoot":""}